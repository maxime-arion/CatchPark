<!DOCTYPE html>
<html>
  <head>
    <title>CatchPark</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>
    <link href="https://api.mapbox.com/mapbox-gl-js/v2.11.0/mapbox-gl.css" rel="stylesheet">
    <%= javascript_include_tag 'custom/home' %>
    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>
    <link href="https://api.mapbox.com/mapbox-gl-js/v2.11.0/mapbox-gl.css" rel="stylesheet">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <link rel="manifest" href="<%= asset_path 'manifest.json' %>">
    <%= render 'shared/ios_pwa_links' %>
  </head>

  <body>
  <%= render "shared/navbar" %>
<%= render "shared/flashes" %>

    <%= yield %>
<script>

const menu = document.querySelector(".menu");
const menuBtn = document.querySelector(".menu-btn");
const counters = document.querySelectorAll(".counter")

menuBtn.addEventListener("click", () => {
  menu.classList.toggle("menu-open");
});

counters.forEach(counter => {
  counter.innerText = 0;

  let count = 0;

  function updateCount() {
    const target = parseInt(counter.dataset.count);
    if(count < target) {
      count += 10;
      counter.innerText = count + "+";
      setTimeout(updateCount, 10); /*Count Speed*/
    } else {
      counter.innerText = target + "+";
    }
  }
  updateCount();
});

</script>
    <%= javascript_include_tag 'custom/toggle', async: true %>
    <%= javascript_include_tag 'custom/home', async: true %>
  </body>
</html>
